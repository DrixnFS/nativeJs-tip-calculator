(function(){const a={tip_margins:{bad:2,good:10,perfect:15},cust_addition:25,price:0,cust_count:1,serv_quality:"bad",tip_price:0,final_price:0,setPrice(b){let c=!1;return Number.isInteger(b)&&0<=b&&(a.price=b,a.calcTipPrice(),a.calcFinalPrice(),c=!0),c},setServQuality(b){let c=!1;return a.tip_margins[b]&&(a.serv_quality=b,a.calcTipPrice(),a.calcFinalPrice(),c=!0),c},setCustomerCount(b){let c=!1;return Number.isInteger(b)&&1<=b&&(a.cust_count==b&&a.calcTipPrice(),a.cust_count=b,a.calcFinalPrice(),c=!0),c},calcFinalPrice(){try{let b=a._roundAndFormatPrice(a._getPriceAfterTip()+a._getCustomerAddition());b=-0==b?0:b,a.final_price=b}catch(a){console.error(`Error occured in TipHandler.calcFinalPrice:99 -- ${a}`)}},calcTipPrice(){try{a.tip_price=a._getPriceTip()}catch(a){console.error(`Error occured in TipHandler.calcTipPrice:114 -- ${a}`)}},_getCustomerAddition(){return 1<a.cust_count?a.cust_addition*(a.cust_count-1):0},_getPriceAfterTip(){return a.price+a._getPriceTip()},_getPriceTip(){return a.price/100*a.tip_margins[a.serv_quality]},_roundAndFormatPrice(a){return(10*Math.ceil(parseFloat(a-1)/10)).toLocaleString()}},b={handlePriceChange(c){b._resetErrors("price");let d=parseInt(c.currentTarget.value);(0==d||isNaN(d))&&b._nullPricesOnError();let e=a.setPrice(d);return e?void(!b._isErrPresent()&&b._updatePrices()):(b.handleInputErrors("price"),!1)},handleQualityChange(c){b._resetErrors("serv_quality");let d=a.setServQuality(c.currentTarget.value);return d?void(!b._isErrPresent()&&b._updatePrices()):(b.handleInputErrors("serv_quality"),!1)},handleCustomerCountChange(c){b._resetErrors("cust_count");let d=parseInt(c.currentTarget.value);(1==d||isNaN(d))&&b._nullPricesOnError();let e=a.setCustomerCount(d);return e?void(!b._isErrPresent()&&b._updatePrices()):(b.handleInputErrors("cust_count"),!1)},handleInputErrors(a){if(!a)return console.error("ListenerHandler.handleInputErrors:71 - no \"type\" arg received!"),!1;try{let b=document.querySelector(`#main-content label[data-labelType="${a}"]`);b.querySelector("small").classList.add("el-visible");let c=b.querySelector("input")||b.querySelector("select");c&&c.classList.add("has-error")}catch(a){console.error(`Error occured in ListenerHandler.handleInputErrors:69 -- ${a}`)}},_resetErrors(a){if(!a)return console.error("ListenerHandler._resetErrors:90 - no \"type\" arg received!"),!1;let b=document.querySelectorAll(`#main-content label[data-labelType="${a}"] .el-visible`);b.length&&b.forEach(a=>a.classList.remove("el-visible"));let c=document.querySelectorAll(`#main-content label[data-labelType="${a}"] .has-error`);c.length&&c.forEach(a=>a.classList.remove("has-error"))},_updatePrices(){document.getElementById("final-price").textContent=a.final_price,document.getElementById("tip-price").textContent=a.tip_price},_nullPricesOnError(){a.final_price=0,a.tip_price=0,b._updatePrices()},_isErrPresent(){return!!document.querySelectorAll(`#main-content .has-error`).length}};window.onload=()=>{document.getElementById("main-price").addEventListener("change",b.handlePriceChange),document.getElementById("main-price").addEventListener("keyup",b.handlePriceChange),document.getElementById("service-quality").addEventListener("change",b.handleQualityChange),document.getElementById("customer-count").addEventListener("change",b.handleCustomerCountChange),document.getElementById("customer-count").addEventListener("keyup",b.handleCustomerCountChange)}})();